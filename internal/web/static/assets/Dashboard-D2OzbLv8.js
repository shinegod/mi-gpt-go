const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-48GxJGop.js","assets/index-Bx-rAPGa.css"])))=>i.map(i=>d[i]);
import{_ as G,u as Q,a as U,b as $,c as j,r as I,o as H,d as J,e as K,f as S,g as t,h as b,i as P,w as s,E as O,j as a,k as W,l as X,m as l,n as Y,p as Z,q as tt,t as n,s as z,v as D,x as st,y as et,z as at,A as o,B as lt,C as V,D as nt,F as ot,G as ut,H as rt,I as it,J as h,K as w,L as dt}from"./index-48GxJGop.js";/* empty css                    *//* empty css                *//* empty css               *//* empty css                             */const ct={class:"dashboard"},_t={class:"status-item"},ft={class:"status-info"},pt={class:"status-item"},mt={class:"status-info"},gt={class:"status-item"},vt={class:"status-info"},yt={class:"status-item"},St={class:"status-info"},wt={class:"card-header"},bt={class:"card-header"},Tt={class:"stat-item"},kt={class:"stat-item"},ht={class:"stat-item"},Ct={class:"action-buttons"},Et={__name:"Dashboard",setup(xt){const c=Q(),r=U(),_=$(),A=j(),T=I(!0),k=I(!1);let m=null;const v=async()=>{await Promise.all([c.fetchStatus(),r.fetchStatus(),_.fetchStatus()])},C=i=>{i?m=setInterval(v,5e3):m&&(clearInterval(m),m=null)},R=async()=>{try{const{value:i}=await h.prompt("请输入要播放的文本","测试TTS",{confirmButtonText:"播放",cancelButtonText:"取消",inputValue:"你好，我是小爱同学！"});i&&await r.playTTS(i)&&w.success("TTS播放指令已发送")}catch{}},q=async()=>{try{await h.confirm("确定要重新加载配置吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await A.reloadConfig()&&(w.success("配置重新加载成功"),await v())}catch{}},M=async()=>{k.value=!0;try{const{configAPI:i}=await dt(async()=>{const{configAPI:u}=await import("./index-48GxJGop.js").then(f=>f.ab);return{configAPI:u}},__vite__mapDeps([0,1]));(await i.startSpeaker()).success&&(w.success("音箱服务启动成功"),await v())}catch{w.error("启动音箱服务失败，请检查配置")}finally{k.value=!1}},F=async()=>{try{await h.confirm("确定要重启系统吗？这可能需要几秒钟时间。","警告",{confirmButtonText:"确定重启",cancelButtonText:"取消",type:"warning"}),await c.restart()&&w.success("系统重启指令已发送")}catch{}};return H(()=>{v(),T.value&&C(!0)}),J(()=>{m&&clearInterval(m)}),(i,e)=>{const u=Y,f=X,d=W,y=O,g=lt,p=at,E=et,x=nt,N=ut,L=ot;return S(),K("div",ct,[t(y,{gutter:20,class:"status-cards"},{default:s(()=>[t(d,{span:6},{default:s(()=>[t(f,{class:"status-card"},{default:s(()=>[l("div",_t,[t(u,{size:"30",color:"#67C23A"},{default:s(()=>[a(c).status.isRunning?(S(),b(a(Z),{key:0})):(S(),b(a(tt),{key:1}))]),_:1}),l("div",ft,[e[2]||(e[2]=l("h3",null,"系统状态",-1)),l("p",null,n(a(c).status.isRunning?"运行中":"已停止"),1)])])]),_:1})]),_:1}),t(d,{span:6},{default:s(()=>[t(f,{class:"status-card"},{default:s(()=>[l("div",pt,[t(u,{size:"30",color:"#409EFF"},{default:s(()=>[t(a(z))]),_:1}),l("div",mt,[e[3]||(e[3]=l("h3",null,"音箱状态",-1)),l("p",null,n(a(r).status.connected?"已连接":"未连接"),1)])])]),_:1})]),_:1}),t(d,{span:6},{default:s(()=>[t(f,{class:"status-card"},{default:s(()=>[l("div",gt,[t(u,{size:"30",color:"#E6A23C"},{default:s(()=>[t(a(D))]),_:1}),l("div",vt,[e[4]||(e[4]=l("h3",null,"并发模式",-1)),l("p",null,n(a(_).status.enabled?"已启用":"已禁用"),1)])])]),_:1})]),_:1}),t(d,{span:6},{default:s(()=>[t(f,{class:"status-card"},{default:s(()=>[l("div",yt,[t(u,{size:"30",color:"#F56C6C"},{default:s(()=>[t(a(st))]),_:1}),l("div",St,[e[5]||(e[5]=l("h3",null,"处理任务",-1)),l("p",null,n(a(_).status.processedTasks),1)])])]),_:1})]),_:1})]),_:1}),t(y,{gutter:20,class:"info-section"},{default:s(()=>[t(d,{span:12},{default:s(()=>[t(f,null,{header:s(()=>[l("div",wt,[e[7]||(e[7]=l("span",null,"系统信息",-1)),t(g,{size:"small",onClick:v},{default:s(()=>[t(u,null,{default:s(()=>[t(a(V))]),_:1}),e[6]||(e[6]=o(" 刷新 "))]),_:1,__:[6]})])]),default:s(()=>[t(E,{column:1,border:""},{default:s(()=>[t(p,{label:"版本"},{default:s(()=>[o(n(a(c).status.version),1)]),_:1}),t(p,{label:"Go版本"},{default:s(()=>[o(n(a(c).status.goVersion),1)]),_:1}),t(p,{label:"Web端口"},{default:s(()=>[o(n(a(c).status.webServerPort),1)]),_:1}),t(p,{label:"数据库路径"},{default:s(()=>[o(n(a(c).status.databasePath),1)]),_:1}),t(p,{label:"启动时间"},{default:s(()=>[o(n(a(c).status.startTime?new Date(a(c).status.startTime).toLocaleString():"未知"),1)]),_:1})]),_:1})]),_:1})]),_:1}),t(d,{span:12},{default:s(()=>[t(f,null,{header:s(()=>e[8]||(e[8]=[l("div",{class:"card-header"},[l("span",null,"音箱信息")],-1)])),default:s(()=>[t(E,{column:1,border:""},{default:s(()=>[t(p,{label:"设备名称"},{default:s(()=>[o(n(a(r).status.name),1)]),_:1}),t(p,{label:"设备标识"},{default:s(()=>[o(n(a(r).status.deviceID),1)]),_:1}),t(p,{label:"连接状态"},{default:s(()=>[t(x,{type:a(r).status.connected?"success":"danger"},{default:s(()=>[o(n(a(r).status.connected?"已连接":"未连接"),1)]),_:1},8,["type"])]),_:1}),t(p,{label:"播放状态"},{default:s(()=>[t(x,{type:a(r).status.isPlaying?"warning":"info"},{default:s(()=>[o(n(a(r).status.isPlaying?"播放中":"空闲"),1)]),_:1},8,["type"])]),_:1}),t(p,{label:"最后消息"},{default:s(()=>[o(n(a(r).status.lastMessage),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(_).status.enabled?(S(),b(y,{key:0,gutter:20,class:"concurrent-section"},{default:s(()=>[t(d,{span:24},{default:s(()=>[t(f,null,{header:s(()=>[l("div",bt,[e[9]||(e[9]=l("span",null,"并发处理统计",-1)),t(N,{modelValue:T.value,"onUpdate:modelValue":e[0]||(e[0]=B=>T.value=B),"active-text":"自动刷新",onChange:C},null,8,["modelValue"])])]),default:s(()=>[t(y,{gutter:20},{default:s(()=>[t(d,{span:8},{default:s(()=>[l("div",Tt,[l("h3",null,n(a(_).status.workerCount),1),e[10]||(e[10]=l("p",null,"工作线程",-1))])]),_:1}),t(d,{span:8},{default:s(()=>[l("div",kt,[l("h3",null,n(a(_).status.currentQueueSize)+"/"+n(a(_).status.queueSize),1),e[11]||(e[11]=l("p",null,"队列使用率",-1))])]),_:1}),t(d,{span:8},{default:s(()=>[l("div",ht,[l("h3",null,n(a(_).status.averageProcessTime),1),e[12]||(e[12]=l("p",null,"平均处理时间",-1))])]),_:1})]),_:1}),t(L,{percentage:Math.round(a(_).status.currentQueueSize/a(_).status.queueSize*100),"stroke-width":20,"text-inside":!0,class:"queue-progress"},null,8,["percentage"])]),_:1})]),_:1})]),_:1})):P("",!0),t(y,{gutter:20,class:"quick-actions"},{default:s(()=>[t(d,{span:24},{default:s(()=>[t(f,null,{header:s(()=>e[13]||(e[13]=[l("span",null,"快捷操作",-1)])),default:s(()=>[l("div",Ct,[t(g,{type:"primary",onClick:R},{default:s(()=>[t(u,null,{default:s(()=>[t(a(z))]),_:1}),e[14]||(e[14]=o(" 测试TTS "))]),_:1,__:[14]}),a(r).status?.connected?P("",!0):(S(),b(g,{key:0,type:"success",onClick:M,loading:k.value},{default:s(()=>[t(u,null,{default:s(()=>[t(a(D))]),_:1}),e[15]||(e[15]=o(" 启动音箱服务 "))]),_:1,__:[15]},8,["loading"])),t(g,{type:"success",onClick:q},{default:s(()=>[t(u,null,{default:s(()=>[t(a(rt))]),_:1}),e[16]||(e[16]=o(" 重新加载配置 "))]),_:1,__:[16]}),t(g,{type:"warning",onClick:F},{default:s(()=>[t(u,null,{default:s(()=>[t(a(V))]),_:1}),e[17]||(e[17]=o(" 重启系统 "))]),_:1,__:[17]}),t(g,{onClick:e[1]||(e[1]=B=>i.$router.push("/config"))},{default:s(()=>[t(u,null,{default:s(()=>[t(a(it))]),_:1}),e[18]||(e[18]=o(" 配置管理 "))]),_:1,__:[18]})])]),_:1})]),_:1})]),_:1})])}}},Vt=G(Et,[["__scopeId","data-v-bfc515d8"]]);export{Vt as default};
