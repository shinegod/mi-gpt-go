const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-48GxJGop.js","assets/index-Bx-rAPGa.css"])))=>i.map(i=>d[i]);
import{_ as G,c as J,r as C,M as W,N as X,o as Y,e as P,f as k,g as l,w as o,l as Z,O as h,P as ee,Q as le,i as E,h as ae,R as oe,A as f,S as te,T as se,U as ne,V as D,m as r,W as re,B as de,n as ue,j as S,X as K,E as ie,k as pe,G as me,Y as fe,Z as be,C as Ve,L as x,K as b,J as w}from"./index-48GxJGop.js";/* empty css                *//* empty css                 *//* empty css                 *//* empty css                     *//* empty css               *//* empty css                  */const ge={class:"config-page"},ce={class:"card-header"},Ie={class:"header-actions"},Ae={__name:"Config",setup(ve){const g=J(),T=C("ai"),$=C(!1),R=C(!1),I=C(!1),z=C(!1),a=W({ai:{provider:"deepseek",model:"deepseek-chat",baseURL:"",proxyURL:"",apiKey:"",azureAPIKey:"",azureEndpoint:"",azureDeployment:"",deepSeekAPIKey:"",deepSeekBaseURL:""},bot:{name:"小爱同学",profile:"",masterName:"主人",masterProfile:"",roomName:"客厅",roomDescription:""},speaker:{name:"小爱同学",callAIKeywords:"",wakeupKeywords:"",exitKeywords:"",onEnterAI:"",onExitAI:"",onAIAsking:"",onAIReplied:"",onAIError:"",streamResponse:!0,enableAudioLog:!1,debugMode:!1},mi:{userID:"",password:"",deviceID:"",checkInterval:1e3,timeout:5e3,enableTrace:!1},concurrent:{enable:!0,workerCount:4,queueSize:100,messageBufferSize:50,rateLimit:10,batchSize:5,batchTimeoutSeconds:5,enableMetrics:!0},database:{path:"./data/app.db",debug:!1}}),L={openai:"gpt-4o",azure:"gpt-4",deepseek:"deepseek-chat"};X(()=>a.ai.provider,(i,e)=>{i!==e&&L[i]&&(a.ai.model=L[i],b.info(`已自动切换到 ${i.toUpperCase()} 的推荐模型：${L[i]}`))});const M=async()=>{await g.fetchConfig(),g.config&&(Object.assign(a.ai,g.config.ai),Object.assign(a.bot,g.config.bot),Object.assign(a.speaker,g.config.speaker),Object.assign(a.mi,g.config.mi),Object.assign(a.concurrent,g.config.concurrent),Object.assign(a.database,g.config.database))},B=async()=>{$.value=!0;try{await g.updateConfig(a)&&b.success('配置保存成功！点击"应用配置"按钮来重启音箱服务使配置生效。')}catch{b.error("配置保存失败")}finally{$.value=!1}},O=async()=>{z.value=!0;try{const{speakerAPI:i}=await x(async()=>{const{speakerAPI:u}=await import("./index-48GxJGop.js").then(s=>s.ab);return{speakerAPI:u}},__vite__mapDeps([0,1]));(await i.restartSpeaker()).success&&b.success("配置应用成功，音箱服务已重启")}catch{b.error("应用配置失败，请检查配置是否完整")}finally{z.value=!1}},q=async()=>{R.value=!0;try{const{configAPI:i}=await x(async()=>{const{configAPI:u}=await import("./index-48GxJGop.js").then(s=>s.ab);return{configAPI:u}},__vite__mapDeps([0,1])),e=await i.validateConfig();if(e.success){const{validation:u,messages:s,isComplete:V}=e.data;if(V)b.success("配置验证通过！所有必需项都已正确配置。");else{let d=[];!u.basic&&s.basic&&d.push(`基础配置: ${s.basic}`),!u.ai&&s.ai&&d.push(`AI服务: ${s.ai}`),!u.mi&&s.mi&&d.push(`小米设备: ${s.mi}`),b.warning(`配置验证失败:
${d.join(`
`)}`)}}}catch{b.error("配置验证失败")}finally{R.value=!1}},N=async()=>{I.value=!0;try{const{configAPI:i}=await x(async()=>{const{configAPI:u}=await import("./index-48GxJGop.js").then(s=>s.ab);return{configAPI:u}},__vite__mapDeps([0,1]));await g.updateConfig(a),b.info(`正在测试 ${a.ai.provider.toUpperCase()} 服务连接...`);const e=await i.testAIConnection();if(e.success){const{provider:u,model:s,testMessage:V,response:d}=e.data;await w.alert(`🎉 AI服务连接测试成功！

📋 服务信息:
• 服务商: ${u.toUpperCase()}
• 模型: ${s}

💬 测试对话:
• 测试消息: ${V}
• AI回复: ${d}

✅ 连接状态: 正常
⏱️ 详细日志请查看系统日志页面`,"AI服务连接测试结果",{confirmButtonText:"确定",type:"success",dangerouslyUseHTMLString:!1}),b.success(`${u.toUpperCase()} 服务连接测试成功`)}else throw new Error(e.message||"测试失败")}catch(i){const e=i.response?.data?.message||i.message||"未知错误",u=i.response?.data?.data;let s=`❌ AI服务连接测试失败

`;s+=`🔧 服务信息:
`,s+=`• 服务商: ${a.ai.provider.toUpperCase()}
`,s+=`• 模型: ${a.ai.model}

`,s+=`❌ 错误信息:
${e}

`,u&&(u.testMessage&&(s+=`💬 测试消息: ${u.testMessage}
`),u.error&&(s+=`🐛 详细错误: ${u.error}
`)),s+=`
💡 解决建议:
`,e.includes("401")||e.includes("Authentication")?(s+=`• 检查API密钥是否正确
`,s+=`• 确认API密钥未过期
`,s+=`• 检查账户余额是否充足
`):e.includes("network")||e.includes("timeout")?(s+=`• 检查网络连接
`,s+=`• 确认防火墙设置
`,s+=`• 尝试配置代理URL
`):(s+=`• 检查所有配置项是否填写正确
`,s+=`• 查看系统日志获取详细信息
`,s+=`• 确认服务商API是否正常
`),await w.alert(s,"AI服务连接测试失败",{confirmButtonText:"确定",type:"error",dangerouslyUseHTMLString:!1}),b.error(`${a.ai.provider.toUpperCase()} 服务连接测试失败`)}finally{I.value=!1}},j=async()=>{I.value=!0;try{const{configAPI:i}=await x(async()=>{const{configAPI:u}=await import("./index-48GxJGop.js").then(s=>s.ab);return{configAPI:u}},__vite__mapDeps([0,1]));await g.updateConfig(a),b.info("正在测试小米设备连接...");const e=await i.testMiConnection();if(e.success){const{userID:u,deviceID:s,autoStart:V,speakerStatus:d}=e.data;let m=`🎉 小米设备连接测试成功！

`;m+=`📱 设备信息:
`,m+=`• 用户账号: ${u}
`,m+=`• 设备ID: ${s}
`,m+=`• 连接状态: 正常

`,V&&(m+=`🚀 音箱服务状态:
`,m+=`• 自动启动: 成功
`,m+=`• 服务状态: 运行中

`),m+=`✅ 第三方库 xiaoai-tts 工作正常
`,m+="🔧 可以在音箱控制页面进行TTS测试",await w.alert(m,"小米设备连接测试结果",{confirmButtonText:"确定",type:"success",dangerouslyUseHTMLString:!1}),b.success("小米设备连接测试成功")}else throw new Error(e.message||"测试失败")}catch(i){const e=i.response?.data?.message||i.message||"未知错误",u=i.response?.data?.data;let s=`❌ 小米设备连接测试失败

`;s+=`📱 设备信息:
`,s+=`• 用户账号: ${a.mi.userID}
`,s+=`• 设备ID: ${a.mi.deviceID}

`,s+=`❌ 错误信息:
${e}

`,u?.error&&(s+=`🐛 详细错误: ${u.error}

`),s+=`💡 解决建议:
`,e.includes("登录失败")||e.includes("Authentication")?(s+=`• 检查小米账号用户名和密码是否正确
`,s+=`• 确认没有开启二步验证
`,s+=`• 尝试在小米官方APP中先登录一次
`):e.includes("json")||e.includes("unmarshal")?(s+=`• 这可能是小米服务器临时问题
`,s+=`• 请稍后重试
`,s+=`• 检查网络连接是否稳定
`):e.includes("设备")?(s+=`• 检查设备ID是否正确
`,s+=`• 确认设备在同一网络中
`,s+=`• 在小米官方APP中确认设备状态
`):(s+=`• 检查网络连接
`,s+=`• 确认小米账号状态正常
`,s+=`• 查看系统日志获取详细信息
`),await w.alert(s,"小米设备连接测试失败",{confirmButtonText:"确定",type:"error",dangerouslyUseHTMLString:!1}),b.error("小米设备连接测试失败")}finally{I.value=!1}},F=async()=>{I.value=!0;try{const{configAPI:i}=await x(async()=>{const{configAPI:d}=await import("./index-48GxJGop.js").then(m=>m.ab);return{configAPI:d}},__vite__mapDeps([0,1]));await g.updateConfig(a);let e=0,u=2,s=[];b.info("正在测试所有服务连接...");try{const d=await i.testAIConnection();d.success&&(s.push({service:"AI服务",status:"success",provider:d.data.provider.toUpperCase(),details:`模型: ${d.data.model}`}),e++)}catch(d){s.push({service:"AI服务",status:"failed",provider:a.ai.provider.toUpperCase(),details:d.response?.data?.message||d.message||"连接失败"})}try{const d=await i.testMiConnection();d.success&&(s.push({service:"小米设备",status:"success",provider:"xiaoai-tts",details:`设备: ${d.data.deviceID}`}),e++)}catch(d){s.push({service:"小米设备",status:"failed",provider:"xiaoai-tts",details:d.response?.data?.message||d.message||"连接失败"})}let V=`🧪 连接测试完成

`;V+=`📊 测试结果: ${e}/${u} 服务连接成功

`,s.forEach((d,m)=>{const n=d.status==="success"?"✅":"❌",p=d.status==="success"?"成功":"失败";V+=`${n} ${d.service} (${d.provider})
`,V+=`   状态: ${p}
`,V+=`   详情: ${d.details}

`}),e===u?(V+="🎉 所有服务都已就绪，可以启动音箱服务！",await w.alert(V,"全部连接测试结果",{confirmButtonText:"确定",type:"success",dangerouslyUseHTMLString:!1}),b.success(`所有服务连接测试成功 (${e}/${u})`)):(V+="⚠️ 请解决失败的服务连接问题后再启动音箱服务",await w.alert(V,"连接测试结果",{confirmButtonText:"确定",type:"warning",dangerouslyUseHTMLString:!1}),b.warning(`部分服务连接成功 (${e}/${u})`))}catch{b.error("连接测试失败")}finally{I.value=!1}};return Y(()=>{M()}),(i,e)=>{const u=ue,s=de,V=oe,d=ne,m=se,n=te,p=re,y=le,_=ee,v=me,c=pe,U=ie,A=fe,H=h,Q=Z;return k(),P("div",ge,[l(Q,null,{header:o(()=>[r("div",ce,[e[52]||(e[52]=r("span",null,"配置管理",-1)),r("div",Ie,[l(s,{size:"small",onClick:M},{default:o(()=>[l(u,null,{default:o(()=>[l(S(Ve))]),_:1}),e[47]||(e[47]=f(" 重新加载 "))]),_:1,__:[47]}),l(s,{size:"small",onClick:q,loading:R.value},{default:o(()=>e[48]||(e[48]=[f(" 验证配置 ")])),_:1,__:[48]},8,["loading"]),l(s,{size:"small",onClick:F,loading:I.value},{default:o(()=>e[49]||(e[49]=[f(" 测试连接 ")])),_:1,__:[49]},8,["loading"]),l(s,{type:"primary",size:"small",onClick:B,loading:$.value},{default:o(()=>[l(u,null,{default:o(()=>[l(S(K))]),_:1}),e[50]||(e[50]=f(" 保存配置 "))]),_:1,__:[50]},8,["loading"]),l(s,{type:"success",size:"small",onClick:O,loading:z.value},{default:o(()=>e[51]||(e[51]=[f(" 🔄 应用配置 ")])),_:1,__:[51]},8,["loading"])])])]),default:o(()=>[l(H,{modelValue:T.value,"onUpdate:modelValue":e[46]||(e[46]=t=>T.value=t),class:"config-tabs"},{default:o(()=>[l(_,{label:"AI服务",name:"ai"},{default:o(()=>[l(y,{model:a.ai,"label-width":"140px",class:"config-form"},{default:o(()=>[l(V,{title:"AI服务配置",type:"info",closable:!1,style:{"margin-bottom":"20px"}},{default:o(()=>e[53]||(e[53]=[f(" 请根据选择的AI服务提供商填写相应的配置信息 ")])),_:1,__:[53]}),l(n,{label:"服务提供商",required:""},{default:o(()=>[l(m,{modelValue:a.ai.provider,"onUpdate:modelValue":e[0]||(e[0]=t=>a.ai.provider=t),placeholder:"请选择AI服务提供商"},{default:o(()=>[l(d,{label:"OpenAI",value:"openai"}),l(d,{label:"Azure OpenAI",value:"azure"}),l(d,{label:"DeepSeek",value:"deepseek"})]),_:1},8,["modelValue"])]),_:1}),a.ai.provider==="openai"?(k(),P(D,{key:0},[l(n,{label:"API Key",required:""},{default:o(()=>[l(p,{modelValue:a.ai.apiKey,"onUpdate:modelValue":e[1]||(e[1]=t=>a.ai.apiKey=t),type:"password",placeholder:"sk-...","show-password":"",clearable:""},null,8,["modelValue"]),e[54]||(e[54]=r("div",{class:"form-tip"},"OpenAI API密钥",-1))]),_:1,__:[54]}),l(n,{label:"模型名称",required:""},{default:o(()=>[l(m,{modelValue:a.ai.model,"onUpdate:modelValue":e[2]||(e[2]=t=>a.ai.model=t),placeholder:"请选择模型"},{default:o(()=>[l(d,{label:"gpt-4o (推荐)",value:"gpt-4o"}),l(d,{label:"gpt-4o-mini",value:"gpt-4o-mini"}),l(d,{label:"gpt-4-turbo",value:"gpt-4-turbo"}),l(d,{label:"gpt-3.5-turbo",value:"gpt-3.5-turbo"})]),_:1},8,["modelValue"])]),_:1})],64)):E("",!0),a.ai.provider==="azure"?(k(),P(D,{key:1},[l(n,{label:"Azure API Key",required:""},{default:o(()=>[l(p,{modelValue:a.ai.azureAPIKey,"onUpdate:modelValue":e[3]||(e[3]=t=>a.ai.azureAPIKey=t),type:"password",placeholder:"Azure OpenAI API密钥","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),l(n,{label:"Azure端点",required:""},{default:o(()=>[l(p,{modelValue:a.ai.azureEndpoint,"onUpdate:modelValue":e[4]||(e[4]=t=>a.ai.azureEndpoint=t),placeholder:"https://your-resource.openai.azure.com",clearable:""},null,8,["modelValue"])]),_:1}),l(n,{label:"模型名称",required:""},{default:o(()=>[l(m,{modelValue:a.ai.model,"onUpdate:modelValue":e[5]||(e[5]=t=>a.ai.model=t),placeholder:"请选择模型"},{default:o(()=>[l(d,{label:"gpt-4 (推荐)",value:"gpt-4"}),l(d,{label:"gpt-4o",value:"gpt-4o"}),l(d,{label:"gpt-35-turbo",value:"gpt-35-turbo"})]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"部署名称",required:""},{default:o(()=>[l(p,{modelValue:a.ai.azureDeployment,"onUpdate:modelValue":e[6]||(e[6]=t=>a.ai.azureDeployment=t),placeholder:"gpt-4",clearable:""},null,8,["modelValue"]),e[55]||(e[55]=r("div",{class:"form-tip"},"Azure OpenAI 中的部署名称",-1))]),_:1,__:[55]})],64)):E("",!0),a.ai.provider==="deepseek"?(k(),P(D,{key:2},[l(n,{label:"DeepSeek API Key",required:""},{default:o(()=>[l(p,{modelValue:a.ai.deepSeekAPIKey,"onUpdate:modelValue":e[7]||(e[7]=t=>a.ai.deepSeekAPIKey=t),placeholder:"请输入DeepSeek API Key","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),l(n,{label:"模型名称",required:""},{default:o(()=>[l(m,{modelValue:a.ai.model,"onUpdate:modelValue":e[8]||(e[8]=t=>a.ai.model=t),placeholder:"请选择模型"},{default:o(()=>[l(d,{label:"deepseek-chat (推荐)",value:"deepseek-chat"}),l(d,{label:"deepseek-coder",value:"deepseek-coder"}),l(d,{label:"deepseek-reasoner",value:"deepseek-reasoner"})]),_:1},8,["modelValue"])]),_:1}),l(n,{label:"API基础URL"},{default:o(()=>[l(p,{modelValue:a.ai.deepSeekBaseURL,"onUpdate:modelValue":e[9]||(e[9]=t=>a.ai.deepSeekBaseURL=t),placeholder:"留空使用默认URL",clearable:""},null,8,["modelValue"]),e[56]||(e[56]=r("div",{class:"form-help"},"自定义API基础地址（可选）",-1))]),_:1,__:[56]})],64)):E("",!0),a.ai.provider!=="deepseek"?(k(),ae(n,{key:3,label:"API基础URL"},{default:o(()=>[l(p,{modelValue:a.ai.baseURL,"onUpdate:modelValue":e[10]||(e[10]=t=>a.ai.baseURL=t),placeholder:"留空使用默认URL"},null,8,["modelValue"]),e[57]||(e[57]=r("div",{class:"form-tip"},"自定义API基础地址（可选）",-1))]),_:1,__:[57]})):E("",!0),l(n,{label:"代理URL"},{default:o(()=>[l(p,{modelValue:a.ai.proxyURL,"onUpdate:modelValue":e[11]||(e[11]=t=>a.ai.proxyURL=t),placeholder:"可选，留空不使用代理"},null,8,["modelValue"]),e[58]||(e[58]=r("div",{class:"form-tip"},"网络代理地址（可选）",-1))]),_:1,__:[58]}),l(n,null,{default:o(()=>[l(s,{type:"success",onClick:N,loading:I.value,size:"large",style:{width:"100%"}},{icon:o(()=>[l(u,null,{default:o(()=>[l(S(K))]),_:1})]),default:o(()=>[e[59]||(e[59]=f(" 测试AI服务连接 "))]),_:1,__:[59]},8,["loading"]),e[60]||(e[60]=r("div",{class:"form-tip"},"验证AI服务配置是否正确",-1))]),_:1,__:[60]})]),_:1},8,["model"])]),_:1}),l(_,{label:"机器人人设",name:"bot"},{default:o(()=>[l(y,{model:a.bot,"label-width":"120px",class:"config-form"},{default:o(()=>[l(n,{label:"机器人名称"},{default:o(()=>[l(p,{modelValue:a.bot.name,"onUpdate:modelValue":e[12]||(e[12]=t=>a.bot.name=t),placeholder:"例如: 小爱同学, 傻妞"},null,8,["modelValue"])]),_:1}),l(n,{label:"机器人人设"},{default:o(()=>[l(p,{modelValue:a.bot.profile,"onUpdate:modelValue":e[13]||(e[13]=t=>a.bot.profile=t),type:"textarea",rows:4,placeholder:"描述机器人的性格、特点等"},null,8,["modelValue"])]),_:1}),l(n,{label:"主人名称"},{default:o(()=>[l(p,{modelValue:a.bot.masterName,"onUpdate:modelValue":e[14]||(e[14]=t=>a.bot.masterName=t),placeholder:"例如: 主人, 小明"},null,8,["modelValue"])]),_:1}),l(n,{label:"主人描述"},{default:o(()=>[l(p,{modelValue:a.bot.masterProfile,"onUpdate:modelValue":e[15]||(e[15]=t=>a.bot.masterProfile=t),type:"textarea",rows:3,placeholder:"描述主人的特点"},null,8,["modelValue"])]),_:1}),l(n,{label:"房间名称"},{default:o(()=>[l(p,{modelValue:a.bot.roomName,"onUpdate:modelValue":e[16]||(e[16]=t=>a.bot.roomName=t),placeholder:"例如: 客厅, 卧室"},null,8,["modelValue"])]),_:1}),l(n,{label:"房间描述"},{default:o(()=>[l(p,{modelValue:a.bot.roomDescription,"onUpdate:modelValue":e[17]||(e[17]=t=>a.bot.roomDescription=t),type:"textarea",rows:3,placeholder:"描述房间的环境"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),l(_,{label:"音箱设置",name:"speaker"},{default:o(()=>[l(y,{model:a.speaker,"label-width":"140px",class:"config-form"},{default:o(()=>[l(n,{label:"音箱名称"},{default:o(()=>[l(p,{modelValue:a.speaker.name,"onUpdate:modelValue":e[18]||(e[18]=t=>a.speaker.name=t),placeholder:"音箱显示名称"},null,8,["modelValue"])]),_:1}),l(n,{label:"召唤关键词"},{default:o(()=>[l(p,{modelValue:a.speaker.callAIKeywords,"onUpdate:modelValue":e[19]||(e[19]=t=>a.speaker.callAIKeywords=t),placeholder:"用逗号分隔，例如: 小爱同学,你好小爱"},null,8,["modelValue"]),e[61]||(e[61]=r("div",{class:"form-tip"},"说出这些关键词会触发AI对话",-1))]),_:1,__:[61]}),l(n,{label:"唤醒关键词"},{default:o(()=>[l(p,{modelValue:a.speaker.wakeupKeywords,"onUpdate:modelValue":e[20]||(e[20]=t=>a.speaker.wakeupKeywords=t),placeholder:"用逗号分隔，例如: 进入连续对话,开始聊天"},null,8,["modelValue"]),e[62]||(e[62]=r("div",{class:"form-tip"},"进入连续对话模式的关键词",-1))]),_:1,__:[62]}),l(n,{label:"退出关键词"},{default:o(()=>[l(p,{modelValue:a.speaker.exitKeywords,"onUpdate:modelValue":e[21]||(e[21]=t=>a.speaker.exitKeywords=t),placeholder:"用逗号分隔，例如: 退出连续对话,再见"},null,8,["modelValue"]),e[63]||(e[63]=r("div",{class:"form-tip"},"退出连续对话模式的关键词",-1))]),_:1,__:[63]}),l(n,{label:"进入AI提示语"},{default:o(()=>[l(p,{modelValue:a.speaker.onEnterAI,"onUpdate:modelValue":e[22]||(e[22]=t=>a.speaker.onEnterAI=t),placeholder:"用逗号分隔多个提示语，随机播放"},null,8,["modelValue"])]),_:1}),l(n,{label:"退出AI提示语"},{default:o(()=>[l(p,{modelValue:a.speaker.onExitAI,"onUpdate:modelValue":e[23]||(e[23]=t=>a.speaker.onExitAI=t),placeholder:"用逗号分隔多个提示语，随机播放"},null,8,["modelValue"])]),_:1}),l(n,{label:"AI思考提示语"},{default:o(()=>[l(p,{modelValue:a.speaker.onAIAsking,"onUpdate:modelValue":e[24]||(e[24]=t=>a.speaker.onAIAsking=t),placeholder:"AI思考时播放的提示语"},null,8,["modelValue"])]),_:1}),l(n,{label:"AI回复完成提示语"},{default:o(()=>[l(p,{modelValue:a.speaker.onAIReplied,"onUpdate:modelValue":e[25]||(e[25]=t=>a.speaker.onAIReplied=t),placeholder:"AI回复完成后的提示语"},null,8,["modelValue"])]),_:1}),l(n,{label:"AI错误提示语"},{default:o(()=>[l(p,{modelValue:a.speaker.onAIError,"onUpdate:modelValue":e[26]||(e[26]=t=>a.speaker.onAIError=t),placeholder:"AI出错时的提示语"},null,8,["modelValue"])]),_:1}),l(U,{gutter:20},{default:o(()=>[l(c,{span:8},{default:o(()=>[l(n,{label:"流式响应"},{default:o(()=>[l(v,{modelValue:a.speaker.streamResponse,"onUpdate:modelValue":e[27]||(e[27]=t=>a.speaker.streamResponse=t)},null,8,["modelValue"])]),_:1})]),_:1}),l(c,{span:8},{default:o(()=>[l(n,{label:"音频日志"},{default:o(()=>[l(v,{modelValue:a.speaker.enableAudioLog,"onUpdate:modelValue":e[28]||(e[28]=t=>a.speaker.enableAudioLog=t)},null,8,["modelValue"])]),_:1})]),_:1}),l(c,{span:8},{default:o(()=>[l(n,{label:"调试模式"},{default:o(()=>[l(v,{modelValue:a.speaker.debugMode,"onUpdate:modelValue":e[29]||(e[29]=t=>a.speaker.debugMode=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(_,{label:"小米设备",name:"mi"},{default:o(()=>[l(y,{model:a.mi,"label-width":"140px",class:"config-form"},{default:o(()=>[l(V,{title:"小米设备连接配置",type:"error",closable:!1,style:{"margin-bottom":"20px"}},{default:o(()=>e[64]||(e[64]=[r("div",null,[r("strong",null,"⚠️ 常见登录失败原因（状态码405）：")],-1),r("div",null,"1. 账号格式错误：必须是手机号或邮箱，不能是QQ号、用户名",-1),r("div",null,'2. 设备标识错误：建议使用设备名称（如"小爱音箱Pro"）或数字设备ID',-1),r("div",null,"3. 开启了二步验证：需要先关闭小米账号的二步验证",-1),r("div",null,"4. 密码错误：请确认是小米账号的登录密码",-1)])),_:1,__:[64]}),l(n,{label:"小米账号",required:""},{default:o(()=>[l(p,{modelValue:a.mi.userID,"onUpdate:modelValue":e[30]||(e[30]=t=>a.mi.userID=t),placeholder:"13812345678 或 user@example.com",clearable:"",type:"password","show-password":""},null,8,["modelValue"]),e[65]||(e[65]=r("div",{class:"form-tip"},[r("strong",{style:{color:"#67C23A"}},"✅ 正确示例："),f(" 13812345678（手机号）、user@163.com（邮箱）、12345678（数字ID） ")],-1))]),_:1,__:[65]}),l(n,{label:"账号密码",required:""},{default:o(()=>[l(p,{modelValue:a.mi.password,"onUpdate:modelValue":e[31]||(e[31]=t=>a.mi.password=t),type:"password",placeholder:"小米账号登录密码","show-password":"",clearable:""},null,8,["modelValue"]),e[66]||(e[66]=r("div",{class:"form-tip"},[r("strong",{style:{color:"#F56C6C"}},"🔑 重要："),r("br"),f("• 必须是小米账号的登录密码（不是设备密码） "),r("br"),f("• 如果账号开启了二步验证，请先到小米官网关闭 "),r("br"),f("• 建议先在小米官网确认能正常登录 ")],-1))]),_:1,__:[66]}),l(n,{label:"设备ID/名称",required:""},{default:o(()=>[l(p,{modelValue:a.mi.deviceID,"onUpdate:modelValue":e[32]||(e[32]=t=>a.mi.deviceID=t),placeholder:"小爱音箱Pro 或 123456789",clearable:""},null,8,["modelValue"]),e[67]||(e[67]=r("div",{class:"form-tip"},[r("strong",{style:{color:"#409EFF"}},"📱 设备标识支持两种方式："),r("br"),r("strong",{style:{color:"#67C23A"}},"✅ 方式1（推荐）："),f('使用设备名称，如 "小爱音箱Pro"、"小爱音箱Play" '),r("br"),f("• 在米家APP中查看设备名称 "),r("br"),f("• 在小爱音箱APP中查看设备名称 "),r("br"),r("strong",{style:{color:"#67C23A"}},"✅ 方式2："),f('使用设备ID，如 "123456789"（纯数字） '),r("br"),f("• 在小爱音箱APP → 设备设置 → 设备信息中查看 "),r("br"),r("strong",{style:{color:"#E6A23C"}},"💡 提示："),f("设备名称更简单易用，推荐优先使用 ")],-1))]),_:1,__:[67]}),l(U,{gutter:20},{default:o(()=>[l(c,{span:12},{default:o(()=>[l(n,{label:"检查间隔(毫秒)"},{default:o(()=>[l(A,{modelValue:a.mi.checkInterval,"onUpdate:modelValue":e[33]||(e[33]=t=>a.mi.checkInterval=t),min:100,max:1e4,step:100},null,8,["modelValue"])]),_:1})]),_:1}),l(c,{span:12},{default:o(()=>[l(n,{label:"超时时间(毫秒)"},{default:o(()=>[l(A,{modelValue:a.mi.timeout,"onUpdate:modelValue":e[34]||(e[34]=t=>a.mi.timeout=t),min:1e3,max:3e4,step:1e3},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(n,{label:"启用跟踪日志"},{default:o(()=>[l(v,{modelValue:a.mi.enableTrace,"onUpdate:modelValue":e[35]||(e[35]=t=>a.mi.enableTrace=t)},null,8,["modelValue"]),e[68]||(e[68]=r("div",{class:"form-tip"},"启用后会记录详细的设备通信日志",-1))]),_:1,__:[68]}),l(n,null,{default:o(()=>[l(s,{type:"primary",onClick:j,loading:I.value,size:"large",style:{width:"100%"}},{icon:o(()=>[l(u,null,{default:o(()=>[l(S(be))]),_:1})]),default:o(()=>[e[69]||(e[69]=f(" 测试小米设备连接 "))]),_:1,__:[69]},8,["loading"]),e[70]||(e[70]=r("div",{class:"form-tip"},"验证小米账号和设备ID是否正确",-1))]),_:1,__:[70]})]),_:1},8,["model"])]),_:1}),l(_,{label:"并发处理",name:"concurrent"},{default:o(()=>[l(y,{model:a.concurrent,"label-width":"140px",class:"config-form"},{default:o(()=>[l(n,{label:"启用并发处理"},{default:o(()=>[l(v,{modelValue:a.concurrent.enable,"onUpdate:modelValue":e[36]||(e[36]=t=>a.concurrent.enable=t)},null,8,["modelValue"]),e[71]||(e[71]=r("div",{class:"form-tip"},"开启后可显著提升处理性能",-1))]),_:1,__:[71]}),a.concurrent.enable?(k(),P(D,{key:0},[l(U,{gutter:20},{default:o(()=>[l(c,{span:12},{default:o(()=>[l(n,{label:"工作线程数"},{default:o(()=>[l(A,{modelValue:a.concurrent.workerCount,"onUpdate:modelValue":e[37]||(e[37]=t=>a.concurrent.workerCount=t),min:1,max:16},null,8,["modelValue"]),e[72]||(e[72]=r("div",{class:"form-tip"},"推荐设置为CPU核心数",-1))]),_:1,__:[72]})]),_:1}),l(c,{span:12},{default:o(()=>[l(n,{label:"队列大小"},{default:o(()=>[l(A,{modelValue:a.concurrent.queueSize,"onUpdate:modelValue":e[38]||(e[38]=t=>a.concurrent.queueSize=t),min:10,max:1e3,step:10},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(U,{gutter:20},{default:o(()=>[l(c,{span:12},{default:o(()=>[l(n,{label:"消息缓冲区大小"},{default:o(()=>[l(A,{modelValue:a.concurrent.messageBufferSize,"onUpdate:modelValue":e[39]||(e[39]=t=>a.concurrent.messageBufferSize=t),min:10,max:200,step:10},null,8,["modelValue"])]),_:1})]),_:1}),l(c,{span:12},{default:o(()=>[l(n,{label:"速率限制(每秒)"},{default:o(()=>[l(A,{modelValue:a.concurrent.rateLimit,"onUpdate:modelValue":e[40]||(e[40]=t=>a.concurrent.rateLimit=t),min:1,max:100},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(U,{gutter:20},{default:o(()=>[l(c,{span:12},{default:o(()=>[l(n,{label:"批处理大小"},{default:o(()=>[l(A,{modelValue:a.concurrent.batchSize,"onUpdate:modelValue":e[41]||(e[41]=t=>a.concurrent.batchSize=t),min:1,max:20},null,8,["modelValue"]),e[73]||(e[73]=r("div",{class:"form-tip"},"1表示禁用批处理",-1))]),_:1,__:[73]})]),_:1}),l(c,{span:12},{default:o(()=>[l(n,{label:"批处理超时(秒)"},{default:o(()=>[l(A,{modelValue:a.concurrent.batchTimeoutSeconds,"onUpdate:modelValue":e[42]||(e[42]=t=>a.concurrent.batchTimeoutSeconds=t),min:1,max:30},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(n,{label:"启用性能指标"},{default:o(()=>[l(v,{modelValue:a.concurrent.enableMetrics,"onUpdate:modelValue":e[43]||(e[43]=t=>a.concurrent.enableMetrics=t)},null,8,["modelValue"]),e[74]||(e[74]=r("div",{class:"form-tip"},"记录详细的性能统计信息",-1))]),_:1,__:[74]})],64)):E("",!0)]),_:1},8,["model"])]),_:1}),l(_,{label:"数据库",name:"database"},{default:o(()=>[l(y,{model:a.database,"label-width":"120px",class:"config-form"},{default:o(()=>[l(n,{label:"数据库路径"},{default:o(()=>[l(p,{modelValue:a.database.path,"onUpdate:modelValue":e[44]||(e[44]=t=>a.database.path=t),placeholder:"数据库文件路径"},null,8,["modelValue"])]),_:1}),l(n,{label:"调试模式"},{default:o(()=>[l(v,{modelValue:a.database.debug,"onUpdate:modelValue":e[45]||(e[45]=t=>a.database.debug=t)},null,8,["modelValue"]),e[75]||(e[75]=r("div",{class:"form-tip"},"启用后会记录所有SQL查询",-1))]),_:1,__:[75]})]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}},Ee=G(Ae,[["__scopeId","data-v-fa678905"]]);export{Ee as default};
